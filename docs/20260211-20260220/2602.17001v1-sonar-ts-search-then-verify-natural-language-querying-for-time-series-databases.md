---
title: "Sonar-TS: Search-Then-Verify Natural Language Querying for Time Series Databases"
title_zh: Sonar-TS：针对时序数据库的先搜索后验证自然语言查询
authors: "Zhao Tan, Yiji Zhao, Shiyu Wang, Chang Xu, Yuxuan Liang, Xiping Liu, Shirui Pan, Ming Jin"
date: 2026-02-19
pdf: "https://arxiv.org/pdf/2602.17001v1"
tags: ["query:sr"]
score: 6.0
evidence: 用于时间序列查询的神经符号框架
tldr: 针对时序数据库自然语言查询（NLQ4TSDB）中传统方法难以处理形态意图和超长历史的问题，本文提出 Sonar-TS 框架。该框架采用“先搜索后验证”的神经符号化流水线，利用 SQL 检索候选窗口并结合 Python 程序进行精确验证。同时，研究者发布了首个大规模基准测试 NLQTSBench，实验证明 Sonar-TS 在处理复杂时序查询方面显著优于传统方法。
motivation: 现有的 Text-to-SQL 无法处理复杂的时序形态意图，而时序模型在处理超长历史记录时效率低下。
method: 提出 Sonar-TS 框架，通过 SQL 索引初步筛选候选窗口，再利用生成的 Python 程序对原始信号进行验证。
result: 引入了首个大规模基准 NLQTSBench，实验表明该方法能有效解决传统方法失效的复杂时序查询。
conclusion: 本研究系统性地探讨了 NLQ4TSDB 领域，提供了通用的框架和评估标准，为未来研究奠定了基础。
---

## 摘要
针对时序数据库的自然语言查询 (NLQ4TSDB) 旨在帮助非专家用户从海量时间记录中检索有意义的事件、区间和摘要。然而，现有的 Text-to-SQL 方法并非针对形状或异常等连续形态意图而设计，而时序模型则难以处理超长历史数据。为了应对这些挑战，我们提出了 Sonar-TS，这是一个通过“先搜索后验证”流水线处理 NLQ4TSDB 的神经符号框架。类似于主动声呐，它利用特征索引通过 SQL 探测候选窗口，随后通过生成的 Python 程序锁定并根据原始信号验证候选对象。为了实现有效的评估，我们引入了 NLQTSBench，这是首个针对时序数据库规模历史数据的自然语言查询而设计的大规模基准测试。我们的实验突出了该领域的独特挑战，并证明了 Sonar-TS 能够有效处理传统方法失效的复杂时间查询。本工作展示了对 NLQ4TSDB 的首次系统性研究，提供了一个通用框架和评估标准，以促进未来的研究。

## Abstract
Natural Language Querying for Time Series Databases (NLQ4TSDB) aims to assist non-expert users retrieve meaningful events, intervals, and summaries from massive temporal records. However, existing Text-to-SQL methods are not designed for continuous morphological intents such as shapes or anomalies, while time series models struggle to handle ultra-long histories. To address these challenges, we propose Sonar-TS, a neuro-symbolic framework that tackles NLQ4TSDB via a Search-Then-Verify pipeline. Analogous to active sonar, it utilizes a feature index to ping candidate windows via SQL, followed by generated Python programs to lock on and verify candidates against raw signals. To enable effective evaluation, we introduce NLQTSBench, the first large-scale benchmark designed for NLQ over TSDB-scale histories. Our experiments highlight the unique challenges within this domain and demonstrate that Sonar-TS effectively navigates complex temporal queries where traditional methods fail. This work presents the first systematic study of NLQ4TSDB, offering a general framework and evaluation standard to facilitate future research.